{% macro common_counter(user) %}
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
    window.yaCounter41928029Params = {
        is_authenticated: {% if user and user.is_authenticated() %} true {% else %} false {% endif %} 
    };
    
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter41928029 = new Ya.Metrika({ id:41928029, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true, params:window.yaCounter41928029Params });
            } catch(e) { } });
        var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () {
            n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";
        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); } }
    )(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/41928029" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
{% endmacro %}

{% macro goals() %}
    <script type="text/javascript">
        window.yaGoals = {
            open_photo_gallery: function(){window.yaCounter41928029.reachGoal('open_photo_gallery');},
            authentication: function(){window.yaCounter41928029.reachGoal('authentication');}            
        };
    </script>
{% endmacro %}
